<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>建设单位</title>
<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="../css/bootstrap-table.min.css">
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script
src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js">
</script>
<script
src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js">
</script>
<![endif]-->
</head>	
<style>

</style>


<body>
 <!--触发模态框 modal-->
  <div class="modal fade" id="myModal_alert" tabindex="-1"  role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="false" style="margin-top:50px;">
 	<div class="modal-dialog">
 		 <div class="modal-content">
 		 	<div class="modal-header">
 				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button> 
 				 <h4 class="modal-title" >提示框</h4>
 		 	</div> 
 			<div class="modal-body">
 	         <p></p>
 	         <p>请选中一行来进行操作</p>
 			</div>
 		    <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal" >确认</button>

             </div>   
 	    		
 		</div>
  	</div>
 	
 </div>
 <div class="modal fade" id="myModal_addmessage" tabindex="-1"  role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="false" style="margin-top:50px;">
 	<div class="modal-dialog">
 		 <div class="modal-content">
 		 	<div class="modal-header">
 				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button> 
 				 <h4 class="modal-title" >添加单位信息</h4>
 		 	</div> 
 			<div class="modal-body" style="font-size: small;">

		 		<div class="row">
					<div class="col-xs-2 text-right">
			           <span>单位编号:</span>
					</div>
					<div class="form-group col-xs-3">		
						<div class="input-group">				
						<input type="text" class="form-control" name="company_number">
						</div>			 			
			 			</div>
 					<div class="col-xs-2 text-right">
			           <span>单位名称:</span>
					</div>
					<div class="form-group col-xs-3">		
						<div class="input-group">				
						<input type="text" class="form-control"  name="company_name">
						</div>			 			
			 			</div>			
 			    </div>
 			    <div class="row">
			 	 	<div class="col-xs-2 text-right">
			           <span>资质等级:</span>
					</div>
					<div class="form-group col-xs-3">		
						<div class="input-group">				
						<input type="text" class="form-control"  name="level">
						</div>			 			
			 		</div>	
			 		<div class="col-xs-2 text-right">
			           <span> 联系人:</span>
					</div>
					<div class="form-group col-xs-3">		
						<div class="input-group">				
						<input type="text" class="form-control" name="contacter">
						</div>			 			
			 		</div>
			 			
 			    </div>
 			    <div class="row">
			 		<div class="col-xs-2 text-right">
			           <span>联系电话:</span>
					</div>
					<div class="form-group col-xs-3">		
						<div class="input-group">				
						<input type="text" class="form-control" name="contact_phone">
						</div>			 			
			 		</div>	
			 		<div class="col-xs-2 text-right">
			           <span>联系地址:</span>
					</div>
					<div class="form-group col-xs-3">		
						<div class="input-group">				
						<input type="text" class="form-control"  name="contact_address">
						</div>			 			
			 		</div>
 			    </div>


			    
 			</div>
 		    <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="save();">保存</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">取消</button>
             </div>   
 	    		
 		</div>
  	</div>
 	
 </div>
 
 <!-- 搜索区域 -->
  <div class="row" style="border-bottom:1px solid gray;padding:10px 0;">
	<div class="col-xs-6">
		<div class="col-xs-4">
			<span class="text-right">单位名称:</span>
	   <select style="width:50px;height:32px;" aria-controls="DataTables_Table_0" size="1" name="DataTables_Table_0_length">
	    <option selected="selected" value="1">1</option>
	    <option value="2">2</option>
	    <option value="2">2</option>
	   </select>
         
		</div>	
		
		<div class="col-xs-1">
			<button class="btn " type="button" onclick="modify();">查询</button>
		</div>			
	
	</div>	
 </div>
 
 
 <div class="row" style="padding-bottom: 20px;margin-top:10px;">
	
		<div class="col-xs-1 ">
			<button class="btn btn-success" type="button" onclick="add();" >新增</button>
		</div>		
		<div class="col-xs-1">
			<button class="btn btn-danger" type="button" onclick="modify();">修改</button>
		</div>			
		<div class="col-xs-1">
			<button class="btn btn-danger" type="button" onclick="delect();">删除</button>
		</div>		

 </div>
 
 <!-- 表格显示 -->
 <div class="row">
 <div class="col-xs-12" style="margin-top:20px;">
  <div class="panel panel-info">
  <div class="panel-heading text-center "style="background:#eeeeee;color:black"><h4>施工单位</h4></div>
   <table id="table" class="table  table-bordered table-hover datatable">
   <thead id="tem">
    <th id="number">序号</th>
    <th id="company_number">单位编号</th>
    <th id="company_type">单位类型</th>
    <th id="company_name">单位名称</th>
    <th id="level">资质等级</th>
    <th id="contacter">联系人</th>
    <th id="contact_phone">联系电话</th>
    <th id="contact_address">联系地址</th>    
 
   </thead>
   
    <!--
       	作者：421533283@qq.com
       	时间：2017-05-11
       	描述：数据
       -->
    <tr>
   	<th>1</th>
   	<th>fjsdwjz</th>
   	<th>施工单位</th>
   	<th>福建省第五建筑工程公司房地产开发公司</th>
   	<th>1</th>
    <th>xxx</th>
   	<th>xxx</th>
   	<th>xxx</th>
	
   </tr>

   
   <tbody>
   </tbody>
   </table>
  </div>
 </div>
 </div>
 <div class="loading text-center"style="height:100px;width:100%;margin:50px 0">
 	
 	正在加载中...........

 </div>


 <!-- 页面底部显示 -->
 <!-- 每页显示几条记录 -->
 <div id="bottomTool" class="row-fluid" style="height:100px;">
 <div class="span6"  style="width:30%;float:left;height:80px;">
  <div class="dataTables_length" id="DataTables_Table_0_length">
  <label>   每页
   <select id="pageSize" onchange="research()"  aria-controls="DataTables_Table_0" size="1" name="DataTables_Table_0_length">
   <option selected="selected" value="5">5</option>
   <option value="10">10</option>
   <option value="20">20</option>
   </select> 条记录
  </label>
  </div>
 </div>
 <!-- 显示第 1 至 5项记录，共 5 项 -->
 <div class="span6"  style="width:30%;float:left;height:80px;" >
  <div id="DataTables_Table_0_info" class="dataTables_info">显示第 1 至 5 项记录，共 5 项</div>
 </div>
 <!-- 第2页 -->
 <div class="span6" style="width:35%; float:left; height:80px;">
  <div class="dataTables_paginate paging_bootstrap pagination">
  <ul id="previousNext">
   <li onclick="previous()" class="prev disabled btn btn-default" style="float:left;"><a id="previousPage" href="#">上一页</a></li>
   <div id="page" style="float:left;">
   <select id="pageNum" onchange="search()" style="width:50px;height:32px;margin-right:1px;" aria-controls="DataTables_Table_0" size="1" name="DataTables_Table_0_length">
    <option selected="selected" value="1">1</option>
   </select>
   </div>
   <li class="next btn btn-default" onclick="next()" style="float:left;"><a id="nextPage" href="#">下一页 </a></li>
  </ul>
  </div>
 </div>
 
 </div>
</body>
<!-- javascript //-->
<script src="js/jquery-3.2.0.js"></script>
<script src="js/bootstrap.min.js" type="text/javascript"></script>
<script src="../js/bootstrap-table.min.js" type="text/javascript"></script>
<script>
 //初始化，加载完成后执行
$(function(){	
 //选中表格行
$(".modal").draggable();//为模态对话框添加拖拽
 
// ajax提高用户体验
	$(document).ajaxStart(function(){
	
	$('.loading').show();
	
	}).ajaxStop(function(){
	
	$('.loading').hide();
	
	});
	$.ajax({
		
	timeout:5000
	
	})



 });
  /***************正在加载中***********************************************************/
function add(){
	 $('#myModal_addmessage').find(".modal-title").html("添加单位信息");	
	 $("Input[type=text]").val(" ");
	 $('#myModal_addmessage').modal();		
}
/******************将填写的数据放入表格*********************************/

function save(){
	
	  
    var company_number=$("Input[name=company_number]").val();  
    var company_name=$("Input[name=company_name]").val();
    var level=$("Input[name=level]").val();
    var contacter=$("Input[name=contacter]").val();
    var contact_phone=$("Input[name=contact_phone]").val();
    var contact_address=$("Input[name=contact_address]").val();
    var text=$('#myModal_addmessage').find(".modal-title").html();
    if(text=="添加单位信息"){
    var number=$("tr").length; 	
    $("#table").append('<tr >'+'<th>'+number+'</th>'
    					+'<th>'+company_number+'</th>'
    					+'<th>'+'建设单位'+'</th>'
    					+'<th>'+company_name+'</th>'
    					+'<th>'+level+'</th>'
    					+'<th>'+contacter+'</th>'
    					+'<th>'+contact_phone+'</th>'
    					+'<th>'+contact_address+'</th>'   				  
                         +'</tr>');
        }
	if(text=="修改单位信息"){
	var number=$("tr.active").find("th").eq(0).html();
    $("tbody .active").html(
    					'<th>'+number+'</th>'
    					+'<th>'+company_number+'</th>'
    					+'<th>'+'建设单位'+'</th>'
    					+'<th>'+company_name+'</th>'
    					+'<th>'+level+'</th>'
    					+'<th>'+contacter+'</th>'
    					+'<th>'+contact_phone+'</th>'
    					+'<th>'+contact_address+'</th>'   				  
                         );
        }
	
}
/********************修改数据******************************/
function modify () {
	var $trs=$("tbody .active");
	var $ths=$trs.find("th");
	
   if($trs.length>0){
   	
   	$('#myModal_addmessage').find(".modal-title").html("修改单位信息");

   	  
   	for(var k=0;k<$ths.length;k++){ 
 	 
   	  $("#myModal_addmessage input[type=text]").eq(k).val($ths.eq(k+1).text());
   	  if(k>=1){
   	  	$("#myModal_addmessage input[type=text]").eq(k).val($ths.eq(k+2).text());
   	  	
   	  }
   	 
   	}
      $('#myModal_addmessage').modal();

   }else{
   	$('#myModal_alert').modal();
   }

	
}
/**********************删除选中的行****************************************/
function delect(){

	$('tbody>.active').remove();
}


/******************选中行********************************************/

$("body").on("click","tbody>tr",function(){
	$('tbody>tr').removeClass('active');
	$(this).addClass('active');	
})



</script>


</html>	
	
	
	
	